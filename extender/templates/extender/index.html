{% load static %}
<!DOCTYPE html>
<!-- saved from url=(0052)https://getbootstrap.com/docs/4.1/examples/checkout/ -->
<html lang="en">
  <head>
    
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-101626873-4"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());

      gtag('config', 'UA-101626873-4');
    </script>
    
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=0.8, shrink-to-fit=no">
    <meta name="description" content="Patent QueryExtender builds a machine that re-imagining patent search. Our automated keyword extender helps startups and companies focus on the RD plan with a surprising degree of accuracy.">
    <meta name="keywords" content="patent,patent serch,patent analysis,patent in Chinese">
    <meta name="author" content="Goat Wang, Dustin Tsai">
    <!-- <link rel="icon" href="https://getbootstrap.com/favicon.ico"> -->

    <title>專利關鍵字延伸器</title>

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
    <!-- <link rel="stylesheet" href="{% static "extender/example.jpg" %}" crossorigin="anonymous"> -->
    <!-- <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon"> -->
    <link rel="icon" href="{% static "extender/images/favicon.ico" %}" type="image/x-icon">

    <style>
      @font-face {
        font-family: 'msjhl';
        src: url('{% static "extender/font/微软正黑体.ttf" %}');
      }
  
      body{
        font-family:"msjhl";
      }

      #background_div{
        background-image:url('{% static "extender/images/banner2.5.jpg" %}');
        background-repeat: no-repeat fixed;
        background-color:black;
        background-size: cover;
        width:100%;
      }
      
      
      #keywords_textarea{
        height:120px;
        width:100%;
        background-color:rgba(207, 207, 207, 0.5);
        border-style:none; 
        color:rgb(46, 46, 46);
      }

      #extend_btn{
        float: right;
        margin-top: 5px;
      }

      .term_btn{
        margin: 2px 2px 2px 2px;
        font-family:"msjhl";
      }

      .extended_keyword_btn{
        background-color:rgba(255, 255, 255, 0.438);
        border:none;
      }

      .name_td{
        white-space:pre-wrap;
        word-wrap:break-word;
      }

      .date_td{
        min-width:125px;
      }

      h1, h3{
        color:rgb(25, 171, 190);
      }

      h4{
        color: black;
        font-weight: bold;
      }

      .desc_p{
        color:snow;
      }

      #footer_p{
        color:rgb(0, 0, 0);
        font-size: small;
      }

    </style>
  </head>
  <body>
    <section id="background_div">
      <div class="inner">

        <div class="py-5 text-center">
          <!-- <img class="d-block mx-auto mb-4" src="./index_files/bootstrap-solid.svg" alt="" width="72" height="72"> -->
          <h1><b>專利關鍵字延伸器</b></h1>
          <p class="desc_p">運用 AI 機器學習技術 Query Reformulation (QRE) Method 有效將檢索精確度與效率同時提升<br>尋找關鍵字不再是心中的痛！</p>
        </div>

        <div class="row">
          <!-- <div class="col-md-4 order-md-2 mb-4">
            <h4 class="d-flex justify-content-between align-items-center mb-3">
              <span class="text-muted">Your cart</span>
              <span class="badge badge-secondary badge-pill">3</span>
            </h4>
            <ul class="list-group mb-3">
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Product name</h6>
                  <small class="text-muted">Brief description</small>
                </div>
                <span class="text-muted">$12</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Second product</h6>
                  <small class="text-muted">Brief description</small>
                </div>
                <span class="text-muted">$8</span>
              </li>
              <li class="list-group-item d-flex justify-content-between lh-condensed">
                <div>
                  <h6 class="my-0">Third item</h6>
                  <small class="text-muted">Brief description</small>
                </div>
                <span class="text-muted">$5</span>
              </li>
              <li class="list-group-item d-flex justify-content-between bg-light">
                <div class="text-success">
                  <h6 class="my-0">Promo code</h6>
                  <small>EXAMPLECODE</small>
                </div>
                <span class="text-success">-$5</span>
              </li>
              <li class="list-group-item d-flex justify-content-between">
                <span>Total (USD)</span>
                <strong>$20</strong>
              </li>
            </ul>

            <form class="card p-2">
              <div class="input-group">
                <input type="text" class="form-control" placeholder="Promo code">
                <div class="input-group-append">
                  <button type="submit" class="btn btn-secondary">Redeem</button>
                </div>
              </div>
            </form>
          </div> -->
          <div class="offset-md-1 col-md-5">
            <h3 class="mb-3"><b>1. 輸入關鍵字</b></h3>
            <p class="desc_p">一橫列產生一組延伸關鍵字, 兩詞彙以上以逗號( , )分隔<br>輸入完成請點擊右下方 "延伸關鍵字"</p>
            <form class="needs-validation" novalidate="">
              <textarea type="text" class="form-control" id="keywords_textarea" input type="text"></textarea>
              <button id="extend_btn" class="btn btn-sm btn-outline-warning">延伸關鍵字</a>
            </form>
          </div>
          <div class="col-md-5">
            <h3 class="mb-3"><b>2. 延伸關鍵字</b></h3>
            <p class="desc_p">待延伸關鍵字產生於下方, 點擊其新增至左側欄位以進一步查詢<br><br></p>          
            <div id="term_btns_div">
              <button id="clonable_btn" type="button" class="term_btn btn btn-sm btn-light" hidden="hidden"></button>
            </div>
          </div>
        </div>

        <div class="offset-md-1 col-md-10 offset-md-1">
          <hr class="mb-4">
          <button id="retrieve_relevant_titles_btn" class="btn btn-outline-info btn-lg btn-block">檢索相關專利標題</a>
          
      
      </div><br><br>
    </section>


      <div id="retrieval_result_title_div" class="py-5 text-center">

      </div>
      
      <div class="col-md-12" id='titles_table_div'>
    
      </div>

      
      <div class="offset-md-1 col-md-10 offset-md-1">
        <hr class="mb-4">
        <button id="redirect_to_patent_retrieval_sys_btn" class="btn btn-info btn-lg btn-block">至「中華民國專利資訊檢索系統」檢索其它專利</a>
      </div>

      <footer class="my-5 pt-5 text-muted text-center text-small">
        <p id='footer_p' class="mb-1">© 2018 Patent QueryExtender | All rights reserved.</p>
        <!-- <ul class="list-inline">
          <li class="list-inline-item"><a href="https://getbootstrap.com/docs/4.1/examples/checkout/#">Privacy</a></li>
          <li class="list-inline-item"><a href="https://getbootstrap.com/docs/4.1/examples/checkout/#">Terms</a></li>
          <li class="list-inline-item"><a href="https://getbootstrap.com/docs/4.1/examples/checkout/#">Support</a></li>
        </ul> -->
      </footer>
    </div>

    <!-- Bootstrap core JavaScript
    ================================================== -->
    <!-- Placed at the end of the document so the pages load faster -->
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.0/umd/popper.min.js" integrity="sha384-cs/chFZiN24E4KMATLdqdvsezGxaGsi4hLGOzlXwp5UZB1LY//20VyM2taTB4QvJ" crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/js/bootstrap.min.js" integrity="sha384-uefMccjFJAIv6A+rW+L4AHf99KvxDjWSu1z9VI8SKNVmz4sk7buKt/6v9KI65qnm" crossorigin="anonymous"></script>
    <script>
      function term_btn_click(e){
        e.preventDefault()
        terms_str = $("#keywords_textarea").val() + "\n" + $(this).text()
        $("#keywords_textarea").val(terms_str)
      }


      $("#extend_btn").click(function(e){
        e.preventDefault()
        if($("#keywords_textarea").val() != ""){
          $("body").css("cursor", "progress");
          url = '{% url "extender:search_relevant_terms" %}'
          post_data = {terms_str: $("#keywords_textarea").val()}
          function callback(data){
            $("body").css("cursor", "default");            
            $("#term_btns_div button").not(":hidden").each(function(){
              $(this).remove()
            })
  
            related_terms = data.related_terms
            btn_clss = ["primary", "secondary", "success", "danger", "warning", "info", "light", "dark"]
            $(related_terms).each(function(idx, term){
              console.log(idx, term)
  //            $btn = $('<button type="button" class="term_btn btn btn-sm btn-' + btn_clss[idx%8] + '">' + term + '</button>')
              //$btn = $('<button type="button" class="term_btn btn btn-sm btn-light">' + term + '</button>')
              $btn = $("#clonable_btn").clone()
              $btn.text(term).addClass("extended_keyword_btn")
              $btn.removeAttr('hidden')
              $btn.click(term_btn_click)
              $("#term_btns_div").append($btn)
            })
  
          }
          $.ajax({type: 'POST', url: url, data: post_data, dataType: 'json', success: callback });
        }else{
          alert("請輸入關鍵字!")
        }
      })

      $("#retrieve_relevant_titles_btn").click(function(e){
        e.preventDefault()
        if($("#keywords_textarea").val() != ""){
          $("body").css("cursor", "progress");
          url = '{% url "extender:search_relevant_titles" %}'
          post_data = {terms_str: $("#keywords_textarea").val()}

          function callback(data){
            $("body").css("cursor", "default");            

            $("#retrieval_result_title_div").html("")
            $("#retrieval_result_title_div").append($("<h4>").text("標題檢索結果"))


            $table = $("<table>").addClass("table").addClass("table-hover")
            $thead = $("<thead>")
            $tr = $("<tr>")
            $(["#", "專利名稱", "專利編號", "公告/公開日", "申請號"]).each(function(idx, header){
              $tr.append($("<th>").text(header).attr('scope', 'col'))
            })
            $thead.append($tr)
            $table.append($thead)

            $tbody = $("<tbody>")
            console.log(data.data)
            $(data.data).each(function(idx, title_dict){
              $tr = $("<tr>")
              name = ""
              if(title_dict.english_title != null){
                name = title_dict.chinese_title + "\n" + title_dict.english_title
              }else{
                name = title_dict.chinese_title
              }
              $tr.append($("<th>").text((idx + 1).toString()).attr('scope', 'row'))
              //$tr.append($("<td>").append($("<a>").attr("target", "_blank").attr('href', 'http://twpat6.tipo.gov.tw/tipotwoc/tipotwkm?!!FR_'+title_dict.publication_reference_doc_number).text(name)))
              $tr.append($("<td>").text(name).addClass("name_td"))
              $tr.append($("<td>").append($("<a>").attr("target", "_blank").attr('href', 'http://twpat6.tipo.gov.tw/tipotwoc/tipotwkm?!!FR_'+title_dict.publication_reference_doc_number).text(title_dict.publication_reference_doc_number)))
              //$tr.append($("<td>").text(title_dict.publication_reference_doc_number))
              $tr.append($("<td>").text(title_dict.publication_reference_date).addClass("date_td"))
              $tr.append($("<td>").text(title_dict.application_reference_doc_number))
              $tbody.append($tr)
              $table.append($tbody)

              $("#titles_table_div").html('')              
              $("#titles_table_div").append($table)
            })
          }
          $.ajax({type: 'POST', url: url, data: post_data, dataType: 'json', success: callback });
        }else{
          alert("請輸入關鍵字!")
        }
      })

      
      
      var placeholder = '細胞,組織,白血球\n化學,PVC';
      $('#keywords_textarea').val(placeholder);
      $('#keywords_textarea').focus(function() {
          if ($(this).val() == placeholder) {
              $(this).val('');
          }
      });

      $('#keywords_textarea').blur(function() {
          if ($(this).val() == '') {
              $(this).val(placeholder);
          }
      });

      $("#redirect_to_patent_retrieval_sys_btn").click(function(){
        window.open("http://twpat7.tipo.gov.tw/tipotwoc/tipotwkm?.b83300460000000000000000000000000E100A0000000000057553adb")
      })
//BBBBBBBBBBBBBBBB
    </script>
  

</body></html>